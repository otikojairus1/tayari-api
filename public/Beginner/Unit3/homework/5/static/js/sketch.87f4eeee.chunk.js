"use strict";(self.webpackChunk_genially_view_client=self.webpackChunk_genially_view_client||[]).push([[747],{56063:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D});var r=n(14726),o=n(84398),i=n(17588);function l(){const{viewStore:e}=(0,o.g)(),t=function(){const[e,t]=(0,i.useState)({top:0,left:0}),{viewStore:n}=(0,o.g)(),{scrollElement:r}=n;return(0,i.useEffect)((()=>{if(!r)return;const e=()=>{var e,n;t({left:null!==(e=null===r||void 0===r?void 0:r.scrollLeft)&&void 0!==e?e:0,top:null!==(n=null===r||void 0===r?void 0:r.scrollTop)&&void 0!==n?n:0})};return e(),r.addEventListener("scroll",e),()=>{r.removeEventListener("scroll",e)}}),[r]),e}(),{zoomLevel:n}=e;return e=>({x:(e.x+t.left)/n,y:(e.y+t.top)/n})}var s=n(37577);const u=s.Ay.div({position:"absolute",borderRadius:"50%",zIndex:3,pointerEvents:"none",touchAction:"none",opacity:.75});var c=n(45992);const a=(0,r.PA)((()=>{const e=(()=>{const[e,t]=(0,i.useState)();return(0,i.useEffect)((()=>{const e=e=>{t({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e,{capture:!0}),()=>{window.removeEventListener("mousemove",e,{capture:!0})}}),[]),e})(),t=l()(null!==e&&void 0!==e?e:{x:0,y:0}),{paintStore:n,viewStore:r}=(0,o.g)(),s=r.topmostSlide,a=r.calculateSlideScaleToFit(s),{selectedColor:h,widthSelected:p}=n,d=p*a;return(0,c.jsx)(u,{style:{width:d,height:d,backgroundColor:h,left:t.x-d/2,top:t.y-d/2}})}));function h(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>e;return e*r(.5-t*(.5-n))}function p(e){return[-e[0],-e[1]]}function d(e,t){return[e[0]+t[0],e[1]+t[1]]}function g(e,t){return[e[0]-t[0],e[1]-t[1]]}function f(e,t){return[e[0]*t,e[1]*t]}function v(e){return[e[1],-e[0]]}function w(e,t){return e[0]*t[0]+e[1]*t[1]}function m(e,t){return e[0]===t[0]&&e[1]===t[1]}function x(e,t){return function(e){return e[0]*e[0]+e[1]*e[1]}(g(e,t))}function y(e){return function(e,t){return[e[0]/t,e[1]/t]}(e,function(e){return Math.hypot(e[0],e[1])}(e))}function L(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function C(e,t,n){let r=Math.sin(n),o=Math.cos(n),i=e[0]-t[0],l=e[1]-t[1],s=i*r+l*o;return[i*o-l*r+t[0],s+t[1]]}function S(e,t,n){return d(e,f(g(t,e),n))}function M(e,t,n){return d(e,f(t,n))}var{min:b,PI:P}=Math,A=.275,k=P+1e-4;function z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{size:n=16,smoothing:r=.5,thinning:o=.5,simulatePressure:i=!0,easing:l=(e=>e),start:s={},end:u={},last:c=!1}=t,{cap:a=!0,easing:m=(e=>e*(2-e))}=s,{cap:L=!0,easing:P=(e=>--e*e*e+1)}=u;if(0===e.length||n<=0)return[];let z,E=e[e.length-1].runningLength,j=!1===s.taper?0:!0===s.taper?Math.max(n,E):s.taper,_=!1===u.taper?0:!0===u.taper?Math.max(n,E):u.taper,I=Math.pow(n*r,2),Z=[],T=[],B=e.slice(0,10).reduce(((e,t)=>{let r=t.pressure;if(i){let o=b(1,t.distance/n),i=b(1,1-o);r=b(1,e+o*A*(i-e))}return(e+r)/2}),e[0].pressure),D=h(n,o,e[e.length-1].pressure,l),F=e[0].vector,H=e[0].point,R=H,W=H,X=R,Y=!1;for(let p=0;p<e.length;p++){let{pressure:t}=e[p],{point:r,vector:s,distance:u,runningLength:c}=e[p];if(p<e.length-1&&E-c<3)continue;if(o){if(i){let e=b(1,u/n),r=b(1,1-e);t=b(1,B+e*A*(r-B))}D=h(n,o,t,l)}else D=n/2;void 0===z&&(z=D);let a=c<j?m(c/j):1,y=E-c<_?P((E-c)/_):1;D=Math.max(.01,D*Math.min(a,y));let L=(p<e.length-1?e[p+1]:e[p]).vector,M=p<e.length-1?w(s,L):1,N=null!==M&&M<0;if(w(s,F)<0&&!Y||N){let e=f(v(F),D);for(let t=1/13,n=0;n<=1;n+=t)W=C(g(r,e),r,k*n),Z.push(W),X=C(d(r,e),r,k*-n),T.push(X);H=W,R=X,N&&(Y=!0);continue}if(Y=!1,p===e.length-1){let e=f(v(s),D);Z.push(g(r,e)),T.push(d(r,e));continue}let Q=f(v(S(L,s,M)),D);W=g(r,Q),(p<=1||x(H,W)>I)&&(Z.push(W),H=W),X=d(r,Q),(p<=1||x(R,X)>I)&&(T.push(X),R=X),B=t,F=s}let N=e[0].point.slice(0,2),Q=e.length>1?e[e.length-1].point.slice(0,2):d(e[0].point,[1,1]),q=[],G=[];if(1===e.length){if(!j&&!_||c){let e=M(N,y(v(g(N,Q))),-(z||D)),t=[];for(let n=1/13,r=n;r<=1;r+=n)t.push(C(e,N,2*k*r));return t}}else{if(!(j||_&&1===e.length))if(a)for(let e=1/13,n=e;n<=1;n+=e){let e=C(T[0],N,k*n);q.push(e)}else{let e=g(Z[0],T[0]),t=f(e,.5),n=f(e,.51);q.push(g(N,t),g(N,n),d(N,n),d(N,t))}let t=v(p(e[e.length-1].vector));if(_||j&&1===e.length)G.push(Q);else if(L){let e=M(Q,t,D);for(let t=1/29,n=t;n<1;n+=t)G.push(C(e,Q,3*k*n))}else G.push(d(Q,f(t,D)),d(Q,f(t,.99*D)),g(Q,f(t,.99*D)),g(Q,f(t,D)))}return Z.concat(G,T.reverse(),q)}function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;let{streamline:r=.5,size:o=16,last:i=!1}=t;if(0===e.length)return[];let l=.15+.85*(1-r),s=Array.isArray(e[0])?e:e.map((e=>{let{x:t,y:n,pressure:r=.5}=e;return[t,n,r]}));if(2===s.length){let e=s[1];s=s.slice(0,-1);for(let t=1;t<5;t++)s.push(S(s[0],e,t/4))}1===s.length&&(s=[...s,[...d(s[0],[1,1]),...s[0].slice(2)]]);let u=[{point:[s[0][0],s[0][1]],pressure:s[0][2]>=0?s[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],c=!1,a=0,h=u[0],p=s.length-1;for(let d=1;d<s.length;d++){let e=i&&d===p?s[d].slice(0,2):S(h.point,s[d],l);if(m(h.point,e))continue;let t=L(e,h.point);if(a+=t,d<p&&!c){if(a<o)continue;c=!0}h={point:e,pressure:s[d][2]>=0?s[d][2]:.5,vector:y(g(h.point,e)),distance:t,runningLength:a},u.push(h)}return u[0].vector=(null==(n=u[1])?void 0:n.vector)||[0,0],u}function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return z(E(e,t),t)}const _={size:16,smoothing:1,thinning:.5,streamline:0,easing:e=>e,start:{taper:0,cap:!0},end:{taper:0,cap:!0}};const I=(0,r.PA)((e=>{let{path:t}=e;const n=function(e){if(!e.length)return"";let t="M ".concat(e[0][0]," ").concat(e[0][1]," Q");for(let n=0;n<e.length;n+=1){const[r,o]=e[n],[i,l]=e[(n+1)%e.length];t+=" ".concat(r," ").concat(o," ").concat((r+i)/2," ").concat((o+l)/2)}return t+"Z"}(j(t.points,{..._,size:t.size}));return(0,c.jsx)("path",{d:n,fill:t.color})}));const Z=function(e){const t=window.btoa(e);return"data:image/svg+xml;base64,".concat(t)}('\n    <svg width="'.concat(24,'" height="').concat(24,'" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">\n        <g style="filter: drop-shadow(0px 1px 4px rgba(0, 15, 51, 0.20)););">\n            <path d="M46.2844 5.22217C46.0912 5.22048 45.9066 5.29562 45.7712 5.43105L10.614 40.5882C9.07684 42.1254 8.03639 44.0885 7.62735 46.2236L5.22214 58.778L17.7765 56.3728C19.9116 55.9638 21.8748 54.9233 23.412 53.3861L58.5691 18.229C58.7045 18.0936 58.7797 17.9089 58.778 17.7157C58.7181 10.8756 53.1246 5.28204 46.2844 5.22217Z" fill="white"/>\n            <path fill-rule="evenodd" clip-rule="evenodd" d="M60.1353 17.7037C60.0689 10.1232 53.8768 3.93105 46.2963 3.8647C45.7426 3.85986 45.2067 4.07564 44.8112 4.47111L9.65412 39.6282C7.92477 41.3576 6.75427 43.5661 6.2941 45.9681L3.88889 58.5225C3.80423 58.9644 3.94405 59.4196 4.26222 59.7378C4.5804 60.0559 5.03556 60.1958 5.47749 60.1111L18.0319 57.7059C20.4338 57.2457 22.6424 56.0752 24.3718 54.3459L59.5289 19.1888C59.9244 18.7933 60.1401 18.2574 60.1353 17.7037ZM40.8692 12.2525L46.5369 6.58488C52.428 6.77495 57.225 11.572 57.4151 17.4631L51.7475 23.1308L40.8692 12.2525ZM38.9495 14.1722L11.5738 41.5479C10.2288 42.893 9.31838 44.6107 8.96046 46.4789L6.93173 57.0683L17.521 55.0395C19.3893 54.6816 21.107 53.7712 22.4521 52.4262L49.8278 25.0505L38.9495 14.1722Z" fill="black"/>\n        </g>\n    </svg>\n')),T=s.Ay.svg((()=>({zIndex:2,opacity:.75,touchAction:"none"}))),B=(0,r.PA)((()=>{var e;const t=(0,o.g)(),[n,r]=(0,i.useState)(!1),{viewStore:s}=t,u=t.paintStore,{sketchStorage:h,selectedColor:p,widthSelected:d}=u,g=s.topmostSlide,f=s.calculateSlideScaleToFit(g),v=s.domNode.getBoundingClientRect(),w=(v.width-g.Width*f)/2+v.x,m=(v.height-g.Height*f)/2+v.y,x=l(),y=e=>{const t=x(e);return{x:(t.x-w)/f,y:(t.y-m)/f,pressure:e.pressure}},L=(0,i.useRef)(void 0);return(0,c.jsxs)(i.Fragment,{children:[n&&(0,c.jsx)(a,{}),(0,c.jsx)(T,{"data-genially-role":"sketch-svg",role:"img",onPointerDownCapture:e=>{if(1!==e.buttons)return;e.preventDefault(),e.stopPropagation();const t=u.startPath(g.Id);t.setColor(p),t.setSize(d),t.addPoint(y({x:e.pageX,y:e.pageY,pressure:e.pressure})),L.current=t},onPointerMoveCapture:e=>{var t;1===e.buttons&&(e.preventDefault(),e.stopPropagation(),null===(t=L.current)||void 0===t||t.addPoint(y({x:e.pageX,y:e.pageY,pressure:e.pressure})))},onMouseEnter:()=>{document.body.style.cursor="url(".concat(Z,") 1 ").concat(23,", auto"),r(!0)},onMouseLeave:()=>{document.body.style.cursor="auto",r(!1)},style:{width:g.Width*f,height:g.Height*f},viewBox:"0 0 ".concat(g.Width," ").concat(g.Height),children:null===(e=h.get(g.Id))||void 0===e?void 0:e.map(((e,t)=>(0,c.jsx)(I,{path:e},"path-".concat(t.toString()))))})]})})),D=(0,r.PA)((()=>{const{viewStore:e}=(0,o.g)();return(0,c.jsx)("div",{className:"genially-view-sketch-field-container",children:!e.slideTransitioning&&(0,c.jsx)(B,{})})}))}}]);
//# sourceMappingURL=https://s3-static-genially.genially.com/view/static/js/sketch.87f4eeee.chunk.js.map