"use strict";(self.webpackChunk_genially_view_client=self.webpackChunk_genially_view_client||[]).push([[747],{62837:(e,t,n)=>{n.r(t),n.d(t,{default:()=>F});var r=n(14726),o=n(84398),i=n(17588);const l=()=>({height:window.innerHeight,width:window.innerWidth}),s=()=>{const[e,t]=(0,i.useState)(l);return(0,i.useEffect)((()=>{const e=()=>t(l());return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),e};function u(){const{viewStore:e}=(0,o.g)(),t=function(){const[e,t]=(0,i.useState)({top:0,left:0}),{viewStore:n}=(0,o.g)(),{scrollElement:r}=n;return(0,i.useEffect)((()=>{if(!r)return;const e=()=>{var e,n;t({left:null!==(e=null===r||void 0===r?void 0:r.scrollLeft)&&void 0!==e?e:0,top:null!==(n=null===r||void 0===r?void 0:r.scrollTop)&&void 0!==n?n:0})};return e(),r.addEventListener("scroll",e),()=>{r.removeEventListener("scroll",e)}}),[r]),e}(),{zoomLevel:n}=e;return e=>({x:(e.x+t.left)/n,y:(e.y+t.top)/n})}var c=n(37577);const a=c.Ay.div({position:"absolute",borderRadius:"50%",zIndex:3,pointerEvents:"none",touchAction:"none",opacity:.75});var h=n(45992);const p=(0,r.PA)((()=>{const e=(()=>{const[e,t]=(0,i.useState)();return(0,i.useEffect)((()=>{const e=e=>{t({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e,{capture:!0}),()=>{window.removeEventListener("mousemove",e,{capture:!0})}}),[]),e})(),t=u()(null!==e&&void 0!==e?e:{x:0,y:0}),{paintStore:n,viewStore:r}=(0,o.g)(),l=r.topmostSlide,s=r.calculateSlideScaleToFit(l),{selectedColor:c,widthSelected:p}=n,d=p*s;return(0,h.jsx)(a,{style:{width:d,height:d,backgroundColor:c,left:t.x-d/2,top:t.y-d/2}})}));function d(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>e;return e*r(.5-t*(.5-n))}function g(e){return[-e[0],-e[1]]}function f(e,t){return[e[0]+t[0],e[1]+t[1]]}function v(e,t){return[e[0]-t[0],e[1]-t[1]]}function w(e,t){return[e[0]*t,e[1]*t]}function m(e){return[e[1],-e[0]]}function x(e,t){return e[0]*t[0]+e[1]*t[1]}function y(e,t){return e[0]===t[0]&&e[1]===t[1]}function L(e,t){return function(e){return e[0]*e[0]+e[1]*e[1]}(v(e,t))}function C(e){return function(e,t){return[e[0]/t,e[1]/t]}(e,function(e){return Math.hypot(e[0],e[1])}(e))}function S(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function M(e,t,n){let r=Math.sin(n),o=Math.cos(n),i=e[0]-t[0],l=e[1]-t[1],s=i*r+l*o;return[i*o-l*r+t[0],s+t[1]]}function b(e,t,n){return f(e,w(v(t,e),n))}function P(e,t,n){return f(e,w(t,n))}var{min:E,PI:z}=Math,A=.275,k=z+1e-4;function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{size:n=16,smoothing:r=.5,thinning:o=.5,simulatePressure:i=!0,easing:l=(e=>e),start:s={},end:u={},last:c=!1}=t,{cap:a=!0,easing:h=(e=>e*(2-e))}=s,{cap:p=!0,easing:y=(e=>--e*e*e+1)}=u;if(0===e.length||n<=0)return[];let S,z=e[e.length-1].runningLength,j=!1===s.taper?0:!0===s.taper?Math.max(n,z):s.taper,_=!1===u.taper?0:!0===u.taper?Math.max(n,z):u.taper,I=Math.pow(n*r,2),Z=[],H=[],T=e.slice(0,10).reduce(((e,t)=>{let r=t.pressure;if(i){let o=E(1,t.distance/n),i=E(1,1-o);r=E(1,e+o*A*(i-e))}return(e+r)/2}),e[0].pressure),W=d(n,o,e[e.length-1].pressure,l),D=e[0].vector,F=e[0].point,X=F,Y=F,B=X,R=!1;for(let g=0;g<e.length;g++){let{pressure:t}=e[g],{point:r,vector:s,distance:u,runningLength:c}=e[g];if(g<e.length-1&&z-c<3)continue;if(o){if(i){let e=E(1,u/n),r=E(1,1-e);t=E(1,T+e*A*(r-T))}W=d(n,o,t,l)}else W=n/2;void 0===S&&(S=W);let a=c<j?h(c/j):1,p=z-c<_?y((z-c)/_):1;W=Math.max(.01,W*Math.min(a,p));let C=(g<e.length-1?e[g+1]:e[g]).vector,P=g<e.length-1?x(s,C):1,N=null!==P&&P<0;if(x(s,D)<0&&!R||N){let e=w(m(D),W);for(let t=1/13,n=0;n<=1;n+=t)Y=M(v(r,e),r,k*n),Z.push(Y),B=M(f(r,e),r,k*-n),H.push(B);F=Y,X=B,N&&(R=!0);continue}if(R=!1,g===e.length-1){let e=w(m(s),W);Z.push(v(r,e)),H.push(f(r,e));continue}let Q=w(m(b(C,s,P)),W);Y=v(r,Q),(g<=1||L(F,Y)>I)&&(Z.push(Y),F=Y),B=f(r,Q),(g<=1||L(X,B)>I)&&(H.push(B),X=B),T=t,D=s}let N=e[0].point.slice(0,2),Q=e.length>1?e[e.length-1].point.slice(0,2):f(e[0].point,[1,1]),q=[],G=[];if(1===e.length){if(!j&&!_||c){let e=P(N,C(m(v(N,Q))),-(S||W)),t=[];for(let n=1/13,r=n;r<=1;r+=n)t.push(M(e,N,2*k*r));return t}}else{if(!(j||_&&1===e.length))if(a)for(let e=1/13,n=e;n<=1;n+=e){let e=M(H[0],N,k*n);q.push(e)}else{let e=v(Z[0],H[0]),t=w(e,.5),n=w(e,.51);q.push(v(N,t),v(N,n),f(N,n),f(N,t))}let t=m(g(e[e.length-1].vector));if(_||j&&1===e.length)G.push(Q);else if(p){let e=P(Q,t,W);for(let t=1/29,n=t;n<1;n+=t)G.push(M(e,Q,3*k*n))}else G.push(f(Q,w(t,W)),f(Q,w(t,.99*W)),v(Q,w(t,.99*W)),v(Q,w(t,W)))}return Z.concat(G,H.reverse(),q)}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;let{streamline:r=.5,size:o=16,last:i=!1}=t;if(0===e.length)return[];let l=.15+.85*(1-r),s=Array.isArray(e[0])?e:e.map((e=>{let{x:t,y:n,pressure:r=.5}=e;return[t,n,r]}));if(2===s.length){let e=s[1];s=s.slice(0,-1);for(let t=1;t<5;t++)s.push(b(s[0],e,t/4))}1===s.length&&(s=[...s,[...f(s[0],[1,1]),...s[0].slice(2)]]);let u=[{point:[s[0][0],s[0][1]],pressure:s[0][2]>=0?s[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],c=!1,a=0,h=u[0],p=s.length-1;for(let d=1;d<s.length;d++){let e=i&&d===p?s[d].slice(0,2):b(h.point,s[d],l);if(y(h.point,e))continue;let t=S(e,h.point);if(a+=t,d<p&&!c){if(a<o)continue;c=!0}h={point:e,pressure:s[d][2]>=0?s[d][2]:.5,vector:C(v(h.point,e)),distance:t,runningLength:a},u.push(h)}return u[0].vector=(null==(n=u[1])?void 0:n.vector)||[0,0],u}function I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return j(_(e,t),t)}const Z={size:16,smoothing:1,thinning:.5,streamline:0,easing:e=>e,start:{taper:0,cap:!0},end:{taper:0,cap:!0}};const H=(0,r.PA)((e=>{let{path:t}=e;const n=function(e){if(!e.length)return"";let t="M ".concat(e[0][0]," ").concat(e[0][1]," Q");for(let n=0;n<e.length;n+=1){const[r,o]=e[n],[i,l]=e[(n+1)%e.length];t+=" ".concat(r," ").concat(o," ").concat((r+i)/2," ").concat((o+l)/2)}return t+"Z"}(I(t.points,{...Z,size:t.size}));return(0,h.jsx)("path",{d:n,fill:t.color})}));const T=function(e){const t=window.btoa(e);return"data:image/svg+xml;base64,".concat(t)}('\n    <svg width="'.concat(24,'" height="').concat(24,'" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">\n        <g style="filter: drop-shadow(0px 1px 4px rgba(0, 15, 51, 0.20)););">\n            <path d="M46.2844 5.22217C46.0912 5.22048 45.9066 5.29562 45.7712 5.43105L10.614 40.5882C9.07684 42.1254 8.03639 44.0885 7.62735 46.2236L5.22214 58.778L17.7765 56.3728C19.9116 55.9638 21.8748 54.9233 23.412 53.3861L58.5691 18.229C58.7045 18.0936 58.7797 17.9089 58.778 17.7157C58.7181 10.8756 53.1246 5.28204 46.2844 5.22217Z" fill="white"/>\n            <path fill-rule="evenodd" clip-rule="evenodd" d="M60.1353 17.7037C60.0689 10.1232 53.8768 3.93105 46.2963 3.8647C45.7426 3.85986 45.2067 4.07564 44.8112 4.47111L9.65412 39.6282C7.92477 41.3576 6.75427 43.5661 6.2941 45.9681L3.88889 58.5225C3.80423 58.9644 3.94405 59.4196 4.26222 59.7378C4.5804 60.0559 5.03556 60.1958 5.47749 60.1111L18.0319 57.7059C20.4338 57.2457 22.6424 56.0752 24.3718 54.3459L59.5289 19.1888C59.9244 18.7933 60.1401 18.2574 60.1353 17.7037ZM40.8692 12.2525L46.5369 6.58488C52.428 6.77495 57.225 11.572 57.4151 17.4631L51.7475 23.1308L40.8692 12.2525ZM38.9495 14.1722L11.5738 41.5479C10.2288 42.893 9.31838 44.6107 8.96046 46.4789L6.93173 57.0683L17.521 55.0395C19.3893 54.6816 21.107 53.7712 22.4521 52.4262L49.8278 25.0505L38.9495 14.1722Z" fill="black"/>\n        </g>\n    </svg>\n')),W=c.Ay.svg((()=>({zIndex:2,opacity:.75,touchAction:"none"}))),D=(0,r.PA)((()=>{var e;const t=(0,o.g)(),[n,r]=(0,i.useState)(!1),{viewStore:l}=t,c=t.paintStore,{sketchStorage:a,selectedColor:d,widthSelected:g}=c,f=l.topmostSlide,v=l.calculateSlideScaleToFit(f),w=s(),m=(w.width-f.Width*v)/2,x=(w.height-f.Height*v)/2,y=u(),L=e=>{const t=y(e);return{x:(t.x-m)/v,y:(t.y-x)/v,pressure:e.pressure}},C=(0,i.useRef)(void 0);return(0,h.jsxs)(i.Fragment,{children:[n&&(0,h.jsx)(p,{}),(0,h.jsx)(W,{"data-genially-role":"sketch-svg",role:"img",onPointerDownCapture:e=>{if(1!==e.buttons)return;e.preventDefault(),e.stopPropagation();const t=c.startPath(f.Id);t.setColor(d),t.setSize(g),t.addPoint(L({x:e.pageX,y:e.pageY,pressure:e.pressure})),C.current=t},onPointerMoveCapture:e=>{var t;1===e.buttons&&(e.preventDefault(),e.stopPropagation(),null===(t=C.current)||void 0===t||t.addPoint(L({x:e.pageX,y:e.pageY,pressure:e.pressure})))},onMouseEnter:()=>{document.body.style.cursor="url(".concat(T,") 1 ").concat(23,", auto"),r(!0)},onMouseLeave:()=>{document.body.style.cursor="auto",r(!1)},style:{width:f.Width*v,height:f.Height*v},viewBox:"0 0 ".concat(f.Width," ").concat(f.Height),children:null===(e=a.get(f.Id))||void 0===e?void 0:e.map(((e,t)=>(0,h.jsx)(H,{path:e},"path-".concat(t.toString()))))})]})})),F=(0,r.PA)((()=>{const{viewStore:e}=(0,o.g)();return(0,h.jsx)("div",{className:"genially-view-sketch-field-container",children:!e.slideTransitioning&&(0,h.jsx)(D,{})})}))}}]);
//# sourceMappingURL=https://s3-static-genially.genially.com/view/static/js/sketch.3dc502fb.chunk.js.map